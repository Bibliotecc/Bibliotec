<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://kit.fontawesome.com/9044e11f90.js" crossorigin="anonymous"></script>
    <title>Bibliotec</title>
</head>

<body>
    <header>
        <div class="container">
            <nav class="menu">
                <ul>
                    <li> <a href="index.html"> <img src="img/logo/logotcc.png" alt="logotcc"> </a> </li>
                    <li>
                        <input type="text" name="txtBuscaLivro" id="txtBuscaLivro"
                            placeholder="O que você esta procurando?">
                    </li>
                    <li class="dropdown"> <a> Filtros <img src="img/icons/seta.png" alt="" class="icon"> </a>
                        <div class="dropdown-menu">
                            <a href="index.html?filtro=Ação"> Ação </a>
                            <a href="index.html?filtro=Aventura"> Aventura </a>
                            <a href="index.html?filtro=Romance"> Romance </a>
                            <a href="index.html?filtro=Comédia"> Comédia </a>
                            <a href="index.html?filtro=Ficção Cientifica"> Ficção Cientifica </a>
                            <a href="index.html"> Nenhum </a>
                        </div>
                    </li>
                    <li id="loginLI">
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="background-fundo-all">
        <div id="container-principal" class="container">
            <h1>Romance</h1>
            <div id="carousel-container" class="container-books">
                <div id="carousel" class="carousel">
                    <div class="ajuste">
                        <div id="container-books-Romance" class="container-books"></div>
                    </div>
                </div>
            </div>
            <div class="container-estil-carousel-button">
                <div class="estil-button-carousel">
                    <button id="prev-button" class="carousel-button"> <i class="fa-solid fa-chevron-left"></i> </button>
                    <button id="next-button" class="carousel-button"> <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            <!-- FIM DIV  container-books -->
            <h1>Ficção Cientifica</h1>
            <div id="container-books-FC" class="container-books">
            </div>
            <!-- FIM DIV  container-books -->

        </div>
    </div>
    <footer>
        <div class="container">
            <div class="container-footer">
                <a href="#"> <img src="img/logo/facebook.png" alt=""> </a>
                <a href="https://www.instagram.com/bibliotecaetecolimpia/"> <img src="img/logo/instagram.png" alt="">
                </a>
                <a href="#"> <img src="img/logo/twitter.png" alt=""> </a>
            </div>
        </div>
    </footer>
    <div class="end-page">
        <div class="container">
            <div class="container-desc">
                <div class="estil-titulo-endpage">
                    <h2> Criadores do Site </h2>
                    <h2> 3º Desenvolvimento de Sistemas </h2>
                </div>
                <div class="estil-endpage">
                    <p>Bruno S.</p>
                    <p>Diogo</p>
                    <p>Felipe</p>
                    <p>Gabriella</p>
                    <p>Livia</p>
                    <p>Lucas</p>
                    <p>Lucca</p>
                    <p>Pedro</p>
                    <p>Renzo</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        const carousel = document.getElementById("carousel");
        const prevButton = document.getElementById("prev-button");
        const nextButton = document.getElementById("next-button");
        let isDragging = false;
        let startPosition = 0;
        let currentTranslate = 0;
        let visibleBooks = 1;

        prevButton.addEventListener("click", () => {
            navigateCarousel(1);
        });

        nextButton.addEventListener("click", () => {
            navigateCarousel(-1);
        });

        carousel.addEventListener("mousedown", (e) => {
            isDragging = true;
            startPosition = e.clientX - currentTranslate;
            carousel.style.cursor = "grabbing";
        });

        carousel.addEventListener("mousemove", (e) => {
            if (!isDragging) return;
            const currentPosition = e.clientX;
            const translate = currentPosition - startPosition;
            currentTranslate = translate;
            carousel.style.transform = `translateX(${translate}px)`;
        });

        carousel.addEventListener("mouseup", () => {
            isDragging = false;
            carousel.style.cursor = "grab";
        });

        carousel.addEventListener("mouseleave", () => {
            isDragging = false;
            carousel.style.cursor = "grab";
        });

        // Prevent user from selecting text while dragging
        carousel.addEventListener("selectstart", (e) => {
            e.preventDefault();
        });

        function navigateCarousel(direction) {
            const cardWidth = document.querySelector(".container-books").offsetWidth;
            const maxTranslate = -cardWidth * (document.querySelectorAll(".container-books").length - visibleBooks);

            // Atualiza a tradução atual com base na direção
            currentTranslate += direction * cardWidth;

            // Limita a tradução dentro dos limites do carrossel
            currentTranslate = Math.max(maxTranslate, Math.min(0, currentTranslate));

            // Aplica a transformação ao carrossel
            carousel.style.transform = `translateX(${currentTranslate}px)`;
        }
        // Calculate the number of visible books based on the container width
        function calculateVisibleBooks() {
            const containerWidth = document.querySelector(".container-books").offsetWidth;
            const bookWidth = document.querySelector(".book").offsetWidth;
            return Math.floor(containerWidth / bookWidth);
        }

        // Initially, calculate and set the visible books
        visibleBooks = calculateVisibleBooks();
    </script>





    ---------------------------------------------------------------------------------
    <script type="module" src="js\index.js"></script>

    <script>
        var li = document.getElementById('loginLI');

        //  let signoutlink =document.getElementById('signoutlink');
        var currentUser = "!logado";

        function getUsername() {
            let keepLoggedIn = localStorage.getItem("keepLoggedIn");
            if (keepLoggedIn == "yes") {
                currentUser = JSON.parse(localStorage.getItem('user'));
            }
        }
        function Signout() {
            Swal.fire({
                title: 'Tem certeza que deseja sair?',
                showDenyButton: true,
                confirmButtonText: 'Quero Sair',
                denyButtonText: `Não Quero Sair`,
            }).then((result) => {
                /* Read more about isConfirmed, isDenied below */
                if (result.isConfirmed) {
                    localStorage.removeItem('user');
                    localStorage.removeItem('keepLoggedIn');
                    window.location = "index.html";
                }
                else if (result.isDenied) {
                    Swal.fire('Entendo entendo, você não vai sair!', '', 'error');
                }
            })
        }
        getUsername();
        if (currentUser == "!logado") {
            let a = document.createElement("a");
            a.innerText = "Login";
            a.href = "login.html";
            let img = document.createElement("img");
            img.src = "img/icons/login.png";
            img.className = "icon";
            a.appendChild(img);
            li.appendChild(a);


        }
        else {
            let a = document.createElement("a");
            a.innerText = currentUser.usuNome;
            a.href = "javascript:Signout()";

            li.appendChild(a);
            console.log(currentUser.typeUser);
        }

    </script>

    <script>
        // Pega Valor do ID Pesquisar
        var search = document.getElementById("txtBuscaLivro");

        // Verifico se a Tecla Pressionada é o ENTER
        search.addEventListener("keydown", function (event) {
            if (event.key == "Enter") {
                searchData();
            }
        });

        // Crio a função, uma ação para o searchData()
        function searchData() {
            window.location = 'index.html?search=' + search.value;
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>